

{% extends 'base.html' %}
{% block style %}
  <style>
     body{
      background-image:linear-gradient(blue,pink);
     }
      .card {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        max-width: 300px;
        margin: auto;
        text-align: center;
        font-family: arial;
      }

      .title {
        color: grey;
        font-size: 18px;
      }

      button {
        border: none;
        outline: 0;
        display: inline-block;
        padding: 8px;
        color: white;
        background-color: #000;
        text-align: center;
        cursor: pointer;
        width: 100%;
        font-size: 18px;
      }

      a {
        text-decoration: none;
        font-size: 22px;
        color: black;
      }

      button:hover, a:hover {
        opacity: 0.7;
      }
      
  </style>
{% endblock style %}
{% block title %}
  all_category
{% endblock title %}
{% block head %}

	{% load static %}
  <!-- <link rel="stylesheet" href="{% static 'music/index.css' %}"> -->
{% endblock head %}
{% block body %}
<br>
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <form class="form-inline" action="{% url 'home_app:category' %}" method="POST">
    {% csrf_token %}
    <input class="form-control mr-sm-2" type="text" name="city" placeholder="City Name..." style="width: 50%;">
    <button name="search" type="submit" style="float:right; width: 50%;">SORT HOUSES BY LOCATION</button>
  </form>
</nav>
<form action="{% url 'home_app:category' %}" method="POST">
  {% csrf_token %}
  <input type="text" name="latitude" id="latitude">
  <input type="text" name="longitude" id = longitude>
  <input type="radius" name="radius" >
  <button name="getByCoordinate">SORT HOUSES BY LAT LONG</button>
</form> 
<div id="googleMap" style="width:100%;height:400px;"></div>

{%if all_category_objects%}

<div class="row">
{% for homeobject in all_category_objects %}
	<div class="col-md-4 col-lg-4 col-xl-3 col-sm-6">
		<div class="card" >
      {% if homeobject.picture %}
      <img src="{{homeobject.picture.url}}" alt="No Image" style="float: left; width:280x; height:280px;background-size:cover;">
      {% endif %}
      <h3>City: {{homeobject.city}}</h3>
      <h4>address: {{homeobject.address}}</h4>
      <b><h3>Rent: {{homeobject.rent}}</h3></b>
      {% if homeobject in request.user.extended_reverse.home_list.all %}
      <a href="/removewishlist/{{homeobject.id}}/"><p><button>remove to wishList</button></p></a>
      {%else%}
      <a href="/addwishlist/{{homeobject.id}}/"><p><button>add to wishList</button></p></a>
      {%endif%}
      <a href="/{{homeobject.id}}"><p><button>View</button></p></a>
    </div>
     <br>
  </div>

{% endfor %}

</div>
{%else%}
<h3>You don't have any album</h3>
{%endif%}
<div id="googleMap" style="width:100%;height:400px;"></div>

<script>
function myMap() {
var mapProp= {
  center:new google.maps.LatLng(21.2514,81.6296),
  zoom:12,
};
var marker;

function placeMarker(location) {
  if ( marker ) {
    marker.setPosition(location);
  } else {
    marker = new google.maps.Marker({
      position: location,
      map: map
    });
  }
}

var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
map.addListener('click', function(e) {
    placeMarker(e.latLng, map);
    a = e.latLng;
    lat =parseFloat(a.lat('get'));
    long =parseFloat(a.lng('get'));
    var lat_text_input = document.getElementById('latitude');
    var long_text_input = document.getElementById('longitude');
    lat_text_input.value = lat;
    long_text_input.value = long;

});
}

/*
function placeMarker(position, map) {
    var marker = new google.maps.Marker({
        position: position,
        map: map
    });
    map.panTo(position);
}
*/
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD8SoF_iIZGABFQKJOvQwqGZ5bf8_R20H0&callback=myMap"></script>

{% endblock body %}


